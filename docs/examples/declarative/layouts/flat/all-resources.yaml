# Flat layout - All resources in a single file
# This is suitable for small configurations or quick prototypes

# Authentication strategies
application_auth_strategies:
  - ref: default-oauth
    name: "Default OAuth"
    display_name: "Default OAuth"
    strategy_type: openid_connect
    configs:
      openid_connect:
        issuer: "https://auth.example.com"
        client_id: "api-portal"
        client_secret: "${OAUTH_SECRET}"
        scopes: ["openid", "profile", "email"]

# Portals
portals:
  - ref: main-portal
    name: "Main API Portal"
    description: "Primary developer portal"
    custom_domain: "api.example.com"
    is_public: true
    default_application_auth_strategy_id: default-oauth

# Control planes
control_planes:
  - ref: main-cp
    name: "Main Control Plane"
    cluster_type: "CLUSTER_TYPE_CONTROL_PLANE"
    labels:
      environment: "production"

# APIs with all nested resources
apis:
  - ref: example-api
    name: "Example API"
    description: "A simple example API"
    
    versions:
      - ref: example-v1
        name: "v1.0.0"
        version: "v1"
        publish_status: "published"
    
    publications:
      - ref: example-pub
        portal_id: main-portal
        publish_status: "published"
        auth_strategy_ids: [default-oauth]
    
    implementations:
      - ref: example-impl
        implementation_url: "https://api.example.com/v1"
        service:
          id: "12345678-1234-1234-1234-123456789012"
          control_plane_id: main-cp