# Team Beta Configuration
# All resources in this file belong to the 'team-beta' namespace
# Team Beta manages payment and billing services

apis:
  - ref: payment-api
    name: "Payment Processing API"
    description: "API for processing payments and transactions"
    labels:
      team: beta
      service: payments
      compliance: pci
    kongctl:
      namespace: team-beta      # Team Beta's namespace
      protected: true           # Critical service, protected
    
    versions:
      - ref: payment-v2
        version: "2.0.0"
        spec:
          document: |
            openapi: 3.0.0
            info:
              title: Payment Processing API
              version: 2.0.0
            paths:
              /payments:
                post:
                  summary: Process payment
              /payments/{id}:
                get:
                  summary: Get payment status
    
    publications:
      - ref: payment-portal-pub
        portal_id: beta-portal
        auth_strategy_ids: ["beta-key-auth"]
        registration_enabled: false  # Manual approval required
  
  - ref: billing-api
    name: "Billing Management API"
    description: "API for invoicing and billing operations"
    labels:
      team: beta
      service: billing
    kongctl:
      namespace: team-beta      # Same namespace
      protected: true           # Also critical
    
    versions:
      - ref: billing-v1
        version: "1.0.0"
        spec:
          document: |
            openapi: 3.0.0
            info:
              title: Billing API
              version: 1.0.0

portals:
  - ref: beta-portal
    name: "Beta Team Payment Portal"
    is_public: false  # Internal only
    labels:
      team: beta
      access: restricted
    kongctl:
      namespace: team-beta      # Team's portal
      protected: true           # Protected portal
    
    customization:
      ref: beta-theme
      welcome_message: "Payment Services Documentation"
      theme:
        mode: light
        colors:
          primary: "#E53E3E"  # Red theme for financial services
    
    pages:
      - ref: beta-security
        slug: "security"
        title: "Security & Compliance"
        content: |
          # Security & Compliance
          
          All payment APIs are PCI compliant and follow strict security protocols:
          
          - TLS 1.2+ required
          - API key authentication
          - Request signing for sensitive operations
          - Audit logging enabled

application_auth_strategies:
  - ref: beta-key-auth
    name: "Team Beta API Keys"
    display_name: "API Key (Beta)"
    description: "Secure API key authentication for payment services"
    strategy_type: key_auth
    configs:
      key_names:
        - "x-api-key"
        - "apikey"
      key_in_body: false
      hide_credentials: true
      anonymous: null
    auth_methods:
      - name: key_auth
        display_name: "API Key"
    kongctl:
      namespace: team-beta      # Team's auth strategy
      protected: true           # Protected like other resources