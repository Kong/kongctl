# TODO: Add OIDC auth config, currently configured via clickops

portals:
  - ref: seatgeek
    name: "SeatGeek Developer Portal"
    display_name: "SeatGeek Developer Portal"
    description: "SeatGeek Developer Portal"
    authentication_enabled: true
    rbac_enabled: false
    auto_approve_developers: false
    auto_approve_applications: false
    default_api_visibility: "private"
    default_page_visibility: "private"

    customization:
      ref: getting-started
      theme:
        mode: "light"
        colors:
          primary: "#8250FF"
      layout: "topnav"
      menu:
        main:
          - path: "/getting-started"
            title: "Getting Started"
            external: false
            visibility: "public"
          - path: "/guides"
            title: "Guides"
            external: false
            visibility: "public"
          - path: "/apis"
            title: "APIs"
            external: false
            visibility: "public"
        footer_sections:
          - title: "Products"
            items:
              - path: "#"
                title: "Pricing"
                external: false
                visibility: "public"
              - path: "#"
                title: "APIs"
                external: false
                visibility: "public"
              - path: "#"
                title: "Documentation"
                external: false
                visibility: "public"
          - title: "Company"
            items:
              - path: "#"
                title: "About"
                external: false
                visibility: "public"
              - path: "#"
                title: "Careers"
                external: false
                visibility: "public"
              - path: "#"
                title: "Press"
                external: false
                visibility: "public"
              - path: "#"
                title: "Events"
                external: false
                visibility: "public"
              - path: "#"
                title: "Investors"
                external: false
                visibility: "public"
          - title: "Legal"
            items:
              - path: "#"
                title: "Terms and conditions"
                external: false
                visibility: "public"
              - path: "#"
                title: "Data privacy"
                external: false
                visibility: "public"
              - path: "#"
                title: "Trust and compliance"
                external: false
                visibility: "public"
    
    # Portal pages hierarchy
    pages:
      # Home page
      - ref: home
        slug: "/"
        title: "Kong API"
        description: "Start building and innovating with our APIs"
        visibility: "public"
        status: "published"
        content: !file ./pages/home.md

      # APIs page
      - ref: apis
        slug: "apis"
        title: "APIs"
        description: "API Products available in this Developer Portal."
        visibility: "public"
        status: "published"
        content: !file ./pages/apis.md

      # Getting Started page
      - ref: getting-started
        slug: "getting-started"
        title: "Getting started"
        description: "Get started with our new Developer Portal!"
        visibility: "public"
        status: "published"
        content: !file ./pages/getting-started.md

      # Guides page with children
      - ref: guides
        slug: "guides"
        title: "Guides"
        description: "Step-by-step guides to help you build, integrate, and optimize with our platform. Start coding faster with practical examples and best practices."
        visibility: "public"
        status: "published"
        content: !file ./pages/guides.md
    
    # Portal snippets for reusable content
    snippets:
      - ref: example-guides-page-banner
        name: "example-guides-page-banner"
        title: "Example Page Banner"
        description: "An example of a page banner reusable snippet."
        visibility: "public"
        status: "published"
        content: !file ./snippets/example-guides-page-banner.md

      - ref: example-guides-page-header
        name: "example-guides-page-header"
        title: "Example Guides Page Header"
        description: "An example of a page header reusable snippet with dynamic data."
        visibility: "public"
        status: "published"
        content: !file ./snippets/example-guides-page-header.md

      - ref: example-guides-page-nav
        name: "example-guides-page-nav"
        title: "Guides"
        description: "A snippet to display the page navigation starting with the /guides page. Ideally utilized in the 'page-layout.sidebar-left' page config."
        visibility: "public"
        status: "published"
        content: !file ./snippets/example-guides-page-nav.md

      - ref: example-hero-image
        name: "example-hero-image"
        title: "Hero Image Example"
        description: "An example of a hero snippet containing a reusable SVG image."
        visibility: "public"
        status: "published"
        content: !file ./snippets/example-hero-image.md

      - ref: example-logo-bar
        name: "example-logo-bar"
        title: "Example Logo Bar"
        description: "An example of a snippet containing a row of SVG logos."
        visibility: "public"
        status: "published"
        content: !file ./snippets/example-logo-bar.md

      - ref: example-page-toc
        name: "example-page-toc"
        title: "On this page"
        description: "A snippet to display the table of contents for a page. Ideally utilized in the 'page-layout.sidebar-right' page config."
        visibility: "public"
        status: "published"
        content: !file ./snippets/example-page-toc.md

# Main API configuration with all features
apis:
  - ref: example-api
    # Load metadata from OpenAPI spec using !file tags
    name: !file apis/example-api/spec.yaml#info.title
    description: !file apis/example-api/spec.yaml#info.description
    version: !file apis/example-api/spec.yaml#info.version
    labels:
      foo: bar
    versions:
      - ref: example-api-v1_3_7
        version: "1.3.7"
        spec: !file apis/example-api/spec.yaml
        
    publications:
      # Public publication for external developers
      - ref: example-api-private-publication
        portal_id: seatgeek
        visibility: private
        auto_approve_registrations: false
        
    # API Documents - comprehensive documentation
    documents:
      - ref: main
        title: Main
        status: published
        # Load content from markdown file
        content: !file apis/example-api/documents/main.md
