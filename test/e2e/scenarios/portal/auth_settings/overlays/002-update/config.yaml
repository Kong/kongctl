_defaults:
  kongctl:
    namespace: portal-auth-settings

portals:
  - ref: portal-auth
    name: portal-auth
    display_name: Portal Auth Settings
    description: Portal with auth settings managed declaratively
    kongctl:
      namespace: portal-auth-settings
    auth_settings:
      ref: portal-auth-settings
      basic_auth_enabled: false
      saml_auth_enabled: false
      konnect_mapping_enabled: false
      idp_mapping_enabled: true
      oidc_auth_enabled: true
      oidc_team_mapping_enabled: true
      oidc_issuer: "https://login.microsoftonline.com/common/v2.0"
      oidc_client_id: "client-id-2"
      oidc_client_secret: "client-secret-2"
      oidc_scopes:
        - openid
        - email
        - profile
      oidc_claim_mappings:
        name: full_name
        email: email_address
        groups: teams
